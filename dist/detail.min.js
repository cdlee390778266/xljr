/*! testGrunt 2017-08-24 */
$(document).ready(function(){function a(a){k.hasClass("empty")&&k.removeClass("empty")}function b(a){""===k.get(0).value&&k.addClass("empty")}function c(a){var b=$.fn.zTree.getZTreeObj("tree");if(e="name",$("#getNodesByFilter").attr("checked"))d(!1),o=b.getNodesByFilter(f);else{var c=$.trim(k.get(0).value),e="";if(k.hasClass("empty")&&(c=""),n===c)return;if(n=c,""===c)return void b.showNodes(b.transformToArray(b.getNodes()))}e="name",o=b.getNodesByParamFuzzy(e,c),o=b.transformToArray(o),d(!0)}function d(a){var b=$.fn.zTree.getZTreeObj("tree"),c=b.transformToArray(b.getNodes());b.hideNodes(c);for(var d in o)e(b,o[d]);b.showNodes(o)}function e(a,b){a.expandNode(b,!0,!1,!1);var c=b.getParentNode();null!=c&&(o.push(c),e(a,c))}function f(a){return!a.isParent&&a.isFirstNode}var g=!0,h=$("#table").DataTable({autoFill:!0,dom:'<"top"i>rtp',buttons:["colvis"],bDestroy:!0,retrieve:!0,ajax:{url:"../data/data.json",dataSrc:""},columns:[{data:"name"},{data:"position"},{data:"salary"},{data:"office"}],fnInitComplete:function(a,b){$(parent.document).find("iframe, .right").height($(document).height()+80)},language:{sProcessing:"处理中...",sLengthMenu:"显示 _MENU_ 项结果",sZeroRecords:"没有匹配结果",sInfo:"显示第 _START_ 至 _END_ 项结果，数据总记录数为 _TOTAL_ 条",sInfoEmpty:"显示第 0 至 0 项结果，共 0 项",sInfoFiltered:"(由 _MAX_ 项结果过滤)",sInfoPostFix:"",sSearch:"搜索:",sUrl:"",sEmptyTable:"表中数据为空",sLoadingRecords:"载入中...",sInfoThousands:",",oPaginate:{sFirst:"首页",sPrevious:"上页",sNext:"下页",sLast:"末页"},oAria:{sSortAscending:": 以升序排列此列",sSortDescending:": 以降序排列此列"},buttons:{colvis:"显示列"}}});$("#change").click(function(){var a=g?"../data/data.json":"../data/data1.json";g=!g,h.ajax.url(a).load()}),$(".slide-fields-body").delegate("span i","click",function(a){$(this).hasClass("fa-square-o")?$(this).removeClass("fa-square-o").addClass("fa-check-square-o"):$(this).removeClass("fa-check-square-o").addClass("fa-square-o")}),$(".slide-fields-foot span i").click(function(){$(this).hasClass("fa-square-o")?($(".slide-fields-body span i").removeClass("fa-square-o").addClass("fa-check-square-o"),$(this).removeClass("fa-square-o").addClass("fa-check-square-o")):($(".slide-fields-body span i").removeClass("fa-check-square-o").addClass("fa-square-o"),$(this).removeClass("fa-check-square-o").addClass("fa-square-o"))}),$(".slide-fields-foot a").click(function(){$(".filed-dialog").css("display","block").removeClass("fadeOut").addClass("fadeIn")}),$(".filed-dialog-top i").click(function(){$(".filed-dialog").removeClass("fadeIn").addClass("fadeOut").css("display","none")}),$(".screen-select-btns button").click(function(){$(this).hasClass("active")?($(this).removeClass("active"),$(".screen-select-slide .slide-box").eq($(this).index()).stop().hide()):($(".screen-select-btns button").removeClass("active"),$(this).addClass("active"),$(".screen-select-slide .slide-box").hide(),$(".screen-select-slide .slide-box").eq($(this).index()).stop().show())});var i=function(a,b){var c=!1;a.find("li").each(function(a,b){$(this).find("i").hasClass("active")&&(c=!0)}),c?"add"==b?$("#add-angle").addClass("active"):"remove"==b&&$("#remove-angle").addClass("active"):"add"==b?$("#add-angle").removeClass("active"):"remove"==b&&$("#remove-angle").removeClass("active")};$(".code-list").delegate("li i","click",function(a){var b=$(this).parents(".slide-code-item").attr("handletype");$(this).hasClass("active")?($(this).removeClass("fa-check-square active").addClass("fa-square-o"),$(this).parents(".code-list").find(".code-all i").removeClass("fa-check-square active").addClass("fa-square-o"),i($(this).parent().parent(),b)):($(this).removeClass("fa-square-o").addClass("fa-check-square active"),"add"==b?$("#add-angle").addClass("active"):"remove"==b&&$("#remove-angle").addClass("active"))}),$(".code-all").click(function(){var a=$(this).parents(".slide-code-item").attr("handletype");$(this).find("i").hasClass("active")?($(this).find("i").removeClass("fa-check-square active").addClass("fa-square-o"),$(this).parent().find("li i").removeClass("fa-check-square active").addClass("fa-square-o"),$(this).find("i").addClass("fa-square-o").removeClass("fa-check-square active"),"add"==a?$("#add-angle").removeClass("active"):"remove"==a&&$("#remove-angle").removeClass("active")):($(this).find("i").removeClass("fa-square-o").addClass("fa-check-square active"),$(this).parent().find("li i").removeClass("fa-square-o").addClass("fa-check-square active"),$(this).find("i").removeClass("fa-square-o").addClass("fa-check-square active"),"add"==a?$("#add-angle").addClass("active"):"remove"==a&&$("#remove-angle").addClass("active"))});var j=function(a,b){var c="";return"add"==a?("angle"==b&&($("#add li i").each(function(a,b){$(this).hasClass("active")&&($(this).removeClass("fa-check-square active").addClass("fa-square-o"),c+=$(this).parent().prop("outerHTML"),$(this).parent().remove())}),$("#remove ul").append(c)),"all"==b&&($("#add li i").removeClass("fa-check-square active").addClass("fa-square-o"),c=$("#add ul").html(),$("#add ul").empty(),$("#remove ul").append(c)),$("#add-angle").removeClass("active"),$("#add .code-all").find("i").removeClass("fa-check-square active").addClass("fa-square-o"),$("#remove-all").addClass("active"),void($("#add ul li").length||$("#add-all").removeClass("active"))):"remove"==a?("angle"==b&&($("#remove li i").each(function(a,b){$(this).hasClass("active")&&($(this).removeClass("fa-check-square active").addClass("fa-square-o"),c+=$(this).parent().prop("outerHTML"),$(this).parent().remove())}),$("#add ul").append(c)),"all"==b&&($("#remove li i").removeClass("fa-check-square active").addClass("fa-square-o"),c=$("#remove ul").html(),$("#remove ul").empty(),$("#add ul").append(c)),$("#remove-angle").removeClass("active"),$("#remove .code-all").find("i").removeClass("fa-check-square active").addClass("fa-square-o"),$("#add-all").addClass("active"),void($("#remove ul li").length||$("#remove-all").removeClass("active"))):void 0};$("#add-angle").click(function(){$(this).hasClass("active")&&j("add","angle")}),$("#add-all").click(function(){$(this).hasClass("active")&&j("add","all")}),$("#remove-angle").click(function(){$(this).hasClass("active")&&j("remove","angle")}),$("#remove-all").click(function(){$(this).hasClass("active")&&j("remove","all")});var k,l={check:{enable:!0},view:{showIcon:!1,showLine:!1},data:{key:{title:"t"},simpleData:{enable:!0}}},m=[{id:1,pId:0,name:"节点属性搜索演示 1",t:"id=1"},{id:11,pId:1,name:"关键字可以是名字",t:"id=11"},{id:12,pId:1,name:"关键字可以是level",t:"id=12"},{id:13,pId:1,name:"关键字可以是id",t:"id=13"},{id:14,pId:1,name:"关键字可以是各种属性",t:"id=14"},{id:2,pId:0,name:"节点搜索演示 2",t:"id=2"},{id:21,pId:2,name:"可以只搜索一个节点",t:"id=21"},{id:22,pId:2,name:"可以搜索节点集合",t:"id=22"},{id:23,pId:2,name:"搜我吧",t:"id=23"},{id:3,pId:0,name:"节点搜索演示 3",t:"id=3"},{id:31,pId:3,name:"我的 id 是: 31",t:"id=31"},{id:32,pId:31,name:"我的 id 是: 32",t:"id=32"},{id:33,pId:32,name:"我的 id 是: 33",t:"id=33"}],n="",o=[];k=$("#key");var p=function(){$.fn.zTree.init($("#tree"),l,m),k.bind("focus",a).bind("blur",b).bind("propertychange",c).bind("input",c)};p()});